<HTML>
<HEAD>
<TITLE>Einf&uuml;hrung in Performance Monitoring</TITLE>
<META HTTP-EQUIV="content-type: text/html; charset= ISO-8859-1">
<META HTTP-EQUIV="Content-Language" CONTENT="DE">
<META NAME="robots" CONTENT="FOLLOW,INDEX">
<META NAME="generator" CONTENT="Xitra Site Publishing">
<meta name="Author" content="webmaster@aspheute.com">

<META NAME="revisit-after" CONTENT="7 days">
<META NAME="copyright" CONTENT="(c) 2000-2006. Alle Rechte vorbehalten. Der Inhalt dieser Seiten ist urheberrechtlich geschützt.">
<META HTTP-EQUIV="expires" CONTENT="1999-03-30T00:00:00+00:00"> 
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-store">

<meta http-equiv="Description" name="Description" content="Dieser Artikel f&uuml;hrt Sie in die Serveroptimierung und Server&uuml;berwachung mit Hilfe des Performance Monitors ein. Lernen Sie die wichtigsten Performance Counter kennen, mit deren Hilfe man die Grenzen eines Servers ausloten kann.">
<meta http-equiv="Keywords" name="Keywords" content="ASP,Active Server Pages,IIS,Internet Information Server,PWS,Personal Web Server,ADO,Performance,Counter,Performance Monitor,Diskperf,Perfmon,performance counter">
<link rel="stylesheet" href="../includes/default.css">
</HEAD>
<BODY BGCOLOR="#ffffff"  BACKGROUND="../images/layout/aspheutemainbg.gif" >


<div style="border-bottom: solid 5px white;">
<div class="DotNetGermanCommunityBar">
    <a href="http://www.glengamoi.com">Glengamoi (Forum)</a> &middot;
    <a href="http://www.aspheute.com/" style="font-weight: bold">AspHeute</a> &middot;
    <a href="http://dotnetheute.com/">.NET Heute (RSS-Suche)</a> &middot;
    <a href="http://aspxfiles.com/">AspxFiles (Wiki)</a> &middot;
    <a href="http://blogs.dotnetgerman.com/">.NET Blogs</a>
</div>
</div>


<MAP NAME="titlebar">
<!--<AREA SHAPE=RECT COORDS="116,46,191,61" HREF="http://www.aspaktuell.com" ALT="ASP Aktuell">-->
<!--<AREA SHAPE=RECT COORDS="192,46,255,61" HREF="http://www.aspwelt.com" ALT="ASP Welt">-->
<AREA SHAPE=RECT COORDS="256,46,432,61" HREF="http://www.aspgerman.com/aspgerman/" ALT="ASP German">
<AREA SHAPE=RECT COORDS="115,15,269,42" HREF="../default.htm" ALT="Homepage">
<AREA SHAPE=RECT COORDS="278,26,587,42" HREF="../default.htm" ALT="Homepage">
</MAP>

<div style="position:absolute;left:0px;top:30px">
<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td background="../images/layout/aspheutetitle.gif">
<img src="../images/layout/blind.gif" width="715" height="73" usemap="#titlebar" border="0">
</td>
<td width="100%" background="../images/layout/aspheutetitleext.gif">
&nbsp;
</td>
<td background="../images/layout/aspheutetitleend.gif">
<img src="../images/layout/blind.gif" width="25" height="1">
</td>
</tr>
</table>
</div>

<div style="position:absolute;left:1px;top:115px">
<table width="110" border="0" cellspacing="0" cellpadding="0">
<tr><td width="110"><img src="../Images/spacer.gif" width="110" height="1" alt="" border="0"></td></tr>
<tr>
<td background="../images/layout/aspheuteheader.gif" class="header" height=16 width="110">
<p>Liste</p>
</td>
</tr>
<tr>
<td background="../images/layout/aspheuteheaderext.gif" class="header" width="110">

<p class="content">
<a href="../kategorien/dotNET%202dot0.htm">.NET 2.0 (1)</a><br>
<a href="../kategorien/dotNET%20Allgemein.htm">.NET Allgemein (16)</a><br>
<a href="../kategorien/dotNET%20Fu.htm">.NET Fu (5)</a><br>
<a href="../kategorien/ADOdotNET.htm">ADO.NET (11)</a><br>
<a href="../kategorien/Aprilscherz.htm">Aprilscherz (3)</a><br>
<a href="../kategorien/ASP%20Grundlagen.htm">ASP Grundlagen (44)</a><br>
<a href="../kategorien/ASP%20Tricks.htm">ASP Tricks (83)</a><br>
<a href="../kategorien/ASPdotNET.htm">ASP.NET (44)</a><br>
<a href="../kategorien/ASPIntranetdotde.htm">ASPIntranet.de (5)</a><br>
<a href="../kategorien/Csharp.htm">C# (28)</a><br>
<a href="../kategorien/Datenbank.htm">Datenbank (44)</a><br>
<a href="../kategorien/Dokumentation.htm">Dokumentation (4)</a><br>
<a href="../kategorien/IIS%206dot0.htm">IIS 6.0 (1)</a><br>
<a href="../kategorien/Komponenten.htm">Komponenten (29)</a><br>
<a href="../kategorien/Optimierung.htm">Optimierung (10)</a><br>
<a href="../kategorien/Server.htm">Server (21)</a><br>
<a href="../kategorien/Sicherheit.htm">Sicherheit (34)</a><br>
<a href="../kategorien/Tee%20Off.htm">Tee Off (6)</a><br>
<a href="../kategorien/VBdotNET.htm">VB.NET (6)</a><br>
<a href="../kategorien/WAP.htm">WAP (8)</a><br>
<a href="../kategorien/Web%20Services.htm">Web Services (11)</a><br>
<a href="../kategorien/XML.htm">XML (9)</a><br>


<br>
<a href="/syndication/rss.xml"><img src="../Images/rss_small.png" width="25" height="10" alt="RSS 2.0 - Die neuesten f&uuml;nf Artikel auf AspHeute.com" border="0"></a>

</p><!-- </p> remains -->


<br>

</td>
</tr>
<tr>
<td class="empty" width="110">
&nbsp;
</td>
</tr>
<tr>
<td background="../images/layout/aspheutesearch.gif" class="header" height=16 width="110">
<p>Suchen</p>
</td>
</tr>
<tr>
<td background="../images/layout/aspheutesearchext.gif" class="header" width="110">
<form class="content" ACTION="REMOVED" METHOD="GET">
<div>
<input class="Newsletter" type="text" size="10" name="CiRestriction">
<span class="spacer2"><br></span>
<span class="spacer4"><br></span>
<INPUT TYPE="HIDDEN" NAME="CiMaxRecordsPerPage" VALUE="10">
<INPUT TYPE="HIDDEN" NAME="CiSort" VALUE="rank[d]">
<INPUT TYPE="HIDDEN" NAME="HTMLQueryForm" VALUE="../default.htm">
<img src="../images/layout/blind.gif" width="41" height="1"><input type="image" src="../images/layout/aspheutesearchenter.gif" border="0" width="49" height="14"><br>
<span class="spacer4"><br></span>
</div>
</form>
</td>
</tr>
<tr>
<td class="empty" width="110">
&nbsp;
</td>
</tr>
<tr>
<td background="../images/layout/aspheuteheaderext.gif" class="header" width="110">
<p class="content">
<a href="/REMOVED/" title="Our most popular articles translated into English">English Articles</a><br>
<a href="/REMOVED/" title="Visit our Chinese content section">Chinese Articles</a><br>
<a href="../autoren/UnsereAutoren.htm" title="Unsere Autoren">Unsere Autoren</a><br>
&nbsp;<br>
<a href="/REMOVED/link2us.asp" title="Setzen Sie einen Link zu AspHeute!">Link zu AspHeute</a><br>
<a href="/REMOVED/impressum.asp" title="Das Impressum von AspHeute">Impressum</a><br>
<a href="/REMOVED/advertise.asp" title="Werben auch Sie auf AspHeute">Werben</a><br>
<a href="/REMOVED/kontakt.asp" title="Teilen Sie uns Ihre W&uuml;nsche, Beschwerden und Anregungen mit">Anfragen</a><br>
</p>
</td>
</tr>
</table>
</div>



<!-- Content starts here  -->
<div style="position:absolute;left:120px;top:108px">
<table cellspacing="0" cellpadding="0"><!--Tabelle aussen-->
<tr><!--Tabelle aussen, 1/2-->
<td><!--Tabelle aussen, 1/1-->
    <table border=0 align=center><tr><td align=center>


</td></tr></table>

<H1>Einf&uuml;hrung in Performance Monitoring</H1>
<p>
Geschrieben von: <a href="../autoren/christophwille.htm">Christoph Wille</a><br>
Kategorie: <a href="../kategorien/Optimierung.htm">Optimierung</a><br>
<SCRIPT src="/service/artikelbewertung.asp?Artikel=20000428"></SCRIPT>
</p>
<p>
Die eigenen ASP Seiten auf Geschwindigkeit zu optimieren, ist der erste Schritt zu einer
Website, die viele gleichzeitige Benutzer bedienen kann. Allerdings kann auch noch so gut optimierter ASP
Code den Server bis an seine Grenzen ausreizen. Die Grenzen, die zumeist zuallererst erreicht
werden, sind:
<ul>
<li>Prozessor
<li>RAM
<li>Festplatte
</ul>
</p>

<p>
Grunds&auml;tzlich "merkt" man Performance Probleme erst dann, wenn der Server sehr deutlich langsamer wird - 
allerdings kann man zu diesem Zeitpunkt nur raten, was denn nun die begrenzte Resource ist: ist es das RAM, 
der Prozessor, oder gar die Netzwerkkarte? Um harte Fakten zu bekommen (beziehungsweise permanent zu &uuml;berwachen,
bevor es zu Problemen kommt), sollte man sich des Performance Monitors bedienen:
</p>
<p>
<IMG SRC="Bilder/200004/20000428_1.png" width="513" height="421" border="0" alt="Performance Monitor">
</p>

<p>
Dieses Tool ist bei jeder Standardinstallation von Windows NT/2000 mit dabei, und findet sich bei den Administrationstools.
</p>

<h2>Standardcounter</h2>
<p>
Damit gemeint sind einige Counter, die man bez&uuml;glich der Serverperformance immer im Auge behalten sollte - quasi
unabh&auml;ngig davon, ob man SQL Server oder IIS installiert hat.
</p>
<h3>CPU</h3>
<p>
<ul>
	<li><b>Processor: % Processor Time</b>: &Uuml;berwacht die Zeit, die der Prozessor nicht im Leerlauf verbringt (%).
	Konstante Werte &uuml;ber 80 beziehungsweise 90% zeigen an, da&szlig; man einen schnelleren Prozessor brauchen w&uuml;rde.
	<li><b>System: % Total Processor Time</b>: In einem Multiprozessorsystem gibt dieser Counter die Gesamtauslastung
	aller Prozessoren an. Unter IIS4 konnte ASP nur gut bis 2 Prozessoren skalieren, ab IIS5/Windows 2000 auch
	sehr gut auf 4 Prozessorsystemen.
	<li><b>System: Processor Queue Length</b>: Zeigt die Anzahl der Threads, die auf Prozessorzeit warten. Wenn der
	Wert konstant &uuml;ber 2 steigt, bedeutet dies, da&szlig; der Prozessor mehr Arbeit bekommt, als er bearbeiten kann.
</ul>
</p>

<h3>RAM</h3>
<p>
<ul>
	<li><b>Memory: Available Bytes</b>: &Uuml;berwacht den f&uuml;r Prozesse verf&uuml;gbaren Speicher. Wenn dieser Counter niedrig ist,
	bedeutet das eine generelle Knappheit von RAM im Server.
	<li><b>Memory: Pages/sec</b>: &Uuml;berwacht die Anzahl der Seiten die entweder auf die Festplatte geschrieben, oder von
	dort gelesen werden.
	<li><b>Memory: Page Faults/sec</b>: Zeigt die Anzahl der Page Faults (Seitenfehler) an. Im Zusammenspiel mit
	Pages/sec kann man feststellen, ob exzessives Paging am Server stattfindet.
	<li><b>Process: Page Faults/sec</b>: Damit kann man die Page Faults per Anwendung &uuml;berwachen.
</ul>
</p>

<h3>Festplatte</h3>
<p>
Um die Festplattenaktivit&auml;t &uuml;berwachen zu k&ouml;nnen, m&uuml;ssen die entsprechenden Performance Counter zuerst
aktiviert werden (aus Geschwindigkeitsgr&uuml;nden sind sie deaktiviert). Um die Counter zu aktivieren, f&uuml;hren Sie
folgendes Kommando aus, und starten den Rechner neu:
<pre>diskperf -y</pre>
Wenn man diesen Schritt nicht ausf&uuml;hrt, darf man sich nicht wundern, wenn alle Counter 0 anzeigen! Apropos:
Benutzer von RAID Controllern m&uuml;ssen folgenden Befehl ausf&uuml;hren:
<pre>diskperf -ye</pre>
Diskcounter werden mit
<pre>diskperf -n</pre>
wieder abgeschaltet. Aus Geschwindigkeitsgr&uuml;nden sehr zu empfehlen, wenn man mit der &Uuml;berwachung fertig ist. 
</p>

<p>
Nun aber zu den Countern im Einzelnen:
<ul>
	<li><b>PhysicalDisk: Avg. Disk Queue Length</b>: Verr&auml;t die durchschnittliche Anzahl der Anfragen die auf
	Festplattenzugriff warten. Werte gr&ouml;&szlig;er 2 sind bereits problematisch.
	<li><b>PhysicalDisk: % Disk Time</b>: Prozentsatz der Zeit, bei der die Disk mit Schreibe- oder Leseoperationen
	besch&auml;ftigt ist. Wenn der Wert 90% &uuml;berschreitet, sollte man den folgenden Counter mitber&uuml;cksichtigen:
	<li><b>PhsicalDisk: Current Disk Queue Length</b>: Anzahl der im Moment auf Festplattenzugriff wartenden Anfragen.
	<li><b>Memory: Page Faults/sec</b>: Ja, dieser RAM-Counter hat auch seine Auswirkung auf die Festplatten&uuml;berwachung!
	Damit kann man herausfinden, ob exzessives Paging f&uuml;r die Festplattenaktivit&auml;t verantwortlich ist.
</ul>
</p>



<h2>Arten des Monitorings</h2>
<p>
Bis jetzt habe ich nur die entsprechenden Performance Counter vorgestellt - wie kommt man nun aber an die 
aktuellen Werte der jeweiligen Counter? Dazu gibt es drei verschiedene Wege:
<ul>
	<li><b>Chart</b> Das ist die Standardansicht, die auch der vorangegangene Screenshot zeigt. Hier kann die
	aktuelle Aktivit&auml;t dargestellt werden. Counter werden &uuml;ber das Plus-Symbol (Add Counter) hinzugef&uuml;gt. Im nun
	angezeigten Dialogfenster kann man den gew&uuml;nschten Counter selektieren und in das Chart einf&uuml;gen.
	<p><IMG SRC="Bilder/200004/20000428_2.png" width="398" height="313" border="0" alt=""></p>
	Man sollte sich nur immer bewu&szlig;t sein, ob der jeweilige Counter in %, Millisekunden, Byte usw. anzeigt!
	<li><b>Log</b> Mit dieser Option kann man Daten &uuml;ber einen l&auml;ngeren Zeitraum &uuml;berwachen lassen, und sp&auml;ter
	dann auswerten (auch auf anderem Rechner). Der Vorteil: das Monitoring kann automatisch zB zu einer
	bestimmten Uhrzeit angestossen werden, ohne da&szlig; man am Rechner sitzen m&uuml;&szlig;te. Der Zeitrahmen f&uuml;r die Auswertung
	ist einfach w&auml;hlbar.
	<li><b>Alerts</b> Mit Alerts kann man bestimmte Aktionen ausf&uuml;hren lassen, wenn ein bestimmter Performancecounter
	(oder mehrere) bestimmte Grenzwerte &uuml;ber- oder unterschreiten. Man kann auch angeben, alle wieviel Sekunden
	der Performancecounter abgefragt werden soll. Als Aktionen stehen dann zur Verf&uuml;gung:
	<p><IMG SRC="Bilder/200004/20000428_3.png" width="404" height="448" border="0" alt=""></p>
	Man kann einfach ein Event im Applicationlog vermerken lassen, ein <i>net send</i> durchf&uuml;hren, eine Log
	Operation starten (siehe vorheriger Punkt), oder aber ein beliebiges Programm starten - um sich zB anpagen
	zu lassen.
</ul>
</p>

<h2>Schlu&szlig;bemerkung</h2>
<p>
Dieser Artikel kann nur als Start in das Servermonitoring und seine Techniken dienen, und es ist empfehlenswert,
sich ein gutes Buch &uuml;ber NT Systemoptimierung zuzulegen, wenn man es wirklich ernst meint. Allerdings haben Sie 
jetzt Informationen &uuml;ber die wichtigsten Counter, als auch eine Einf&uuml;hrung in die verschiedenen 
&Uuml;berwachungsmethoden, die Ihnen mit Bordmitteln von NT zur Verf&uuml;gung stehen.
</p><h2>Verwandte Artikel</h2>
<p>
<a href="20000502.htm">Monitoring von ASP</a><br>
<a href="20000809.htm">Performance Monitoring a la .NET</a><br>
<a href="20020731.htm">Trafficreduzierung mit XCompress</a><br>
<a href="20000814.htm">Webserver-Tuning mit XTune</a><br>

</p>

<h2>Wenn Sie jetzt Fragen haben...</h2>
<p>
Wenn Sie Fragen rund um die in diesem Artikel vorgestellte Technologie haben, dann schauen Sie einfach bei uns
in den <a href="http://glengamoi.com/forums/">Community Foren der deutschen .NET Community</a> vorbei. Die Teilnehmer 
helfen Ihnen gerne, wenn Sie sich zur im Artikel vorgestellten Technologie weiterbilden m&ouml;chten.
</p>

<p>
<a href="http://glengamoi.com/forums/"><img src="../images/glengamoi.com_250.gif" width="250" height="80" alt="" border="0"></a>
</p>


<p>
Haben Sie Fragen die sich direkt auf den Inhalt des Artikels beziehen, dann schreiben Sie dem Autor! Unsere Autoren
freuen sich &uuml;ber Feedback zu ihren Artikeln. Ein einfacher Klick auf die <i>Autor kontaktieren</i>
Schaltfl&auml;che (weiter unten) und schon haben Sie ein f&uuml;r diesen Artikel personalisiertes Anfrageformular.
</p>

<p>&nbsp;</p>
<p>
Und zu guter Letzt m&ouml;chten wir Sie bitten, den Artikel zu bewerten. Damit helfen Sie uns, 
die Qualit&auml;t der Artikel zu verbessern - und anderen Lesern bei der Auswahl der Artikel,
die sie lesen sollten.
</p>

<FORM METHOD="POST" STYLE="margin-bottom: 0px;" NAME="formRating" ACTION="/service/bewerten.asp">
<INPUT TYPE="HIDDEN" NAME="ArticleId" VALUE="20000428" />
<CENTER>
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0">
<TR>
	<TD ALIGN="CENTER" VALIGN="MIDDLE" COLSPAN="7">Bewerten Sie diesen Artikel</TD>
</TR>
<TR>
	<TD><EM>&nbsp;Sehr gut&nbsp;</EM></TD>
	<TD><INPUT TYPE="radio" value="1" NAME="radioRating" /></TD>
	<TD><INPUT TYPE="radio" value="2" NAME="radioRating" /></TD>
	<TD><INPUT TYPE="radio" value="3" NAME="radioRating" /></TD>
	<TD><INPUT TYPE="radio" value="4" NAME="radioRating" /></TD>
	<TD><INPUT TYPE="radio" value="5" NAME="radioRating" /></TD>
	<TD ALIGN="right"><EM>&nbsp;Nicht gen&uuml;gend</EM></TD>
	<TD ROWSPAN="2" VALIGN="middle">&nbsp;<INPUT TYPE="submit" VALUE="Werten!" /></TD>
</TR>
<TR>
	<TD>&nbsp;</TD>
	<TD ALIGN="CENTER">&nbsp;1</TD>
	<TD ALIGN="CENTER">&nbsp;2</TD>
	<TD ALIGN="CENTER">&nbsp;3</TD>
	<TD ALIGN="CENTER">&nbsp;4</TD>
	<TD ALIGN="CENTER">&nbsp;5</TD>
	<TD>&nbsp;</TD>
</TR>
</TABLE>
</FORM>
</center>
&nbsp;<P>
<center>
<p><table><tr><td valign=top>
<form action="REMOVED" method="GET"><input type="hidden" name="pagetitle" value="Einf&uuml;hrung in Performance Monitoring"><input type="hidden" name="pageurl" value="http://www.aspheute.com/artikel/20000428.htm"><input type="image" src="../images/layout/senden.png" width="107" height="20" border="0" alt="Schicken Sie diese Seite einem Freund!" style="cursor='hand';"></form>
<td>&nbsp;&nbsp;</td>
<td valign=top>
<form action="REMOVED" method="GET"><input type="hidden" name="Author" value="Christoph Wille"><input type="hidden" name="AuthorEmail" value="christophw@alphasierrapapa.com"><input type="hidden" name="Artikel" value="20000428"><input type="image" src="../images/layout/kontakt.png" width="107" height="20" border="0" alt="Kontaktieren Sie den Autor!" style="cursor='hand';"></form>
<td>&nbsp;&nbsp;</td>
<td valign=top><a href="../PrinterFriendly/20000428.htm"><img src="../images/layout/druck.png" width="118" height="20" border="0" alt="F&uuml;r Ausdruck optimierte Seite"></a></td>
</tr></table></p>
</center>

<center>
<p class="content">
&copy;2000-2006 <A HREF="../service/copyright.htm" title="Copyright Informationen">AspHeute.com</A><br>
Alle Rechte vorbehalten. Der Inhalt dieser Seiten ist urheberrechtlich gesch&uuml;tzt.<br>
Eine &Uuml;bernahme von Texten (auch nur auszugsweise) oder Graphiken bedarf unserer schriftlichen Zustimmung.
<hr>
</p>
</center>

</td>
</tr><!--Tabelle aussen, 2/2-->
</table><!--Tabelle aussen-->
</div>

</BODY>
</HTML>
