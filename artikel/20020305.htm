<HTML>
<HEAD>
<TITLE>Mitlauschen bei der Browser-Webserver Kommunikation</TITLE>
<META HTTP-EQUIV="content-type: text/html; charset= ISO-8859-1">
<META HTTP-EQUIV="Content-Language" CONTENT="DE">
<META NAME="robots" CONTENT="FOLLOW,INDEX">
<META NAME="generator" CONTENT="Xitra Site Publishing">
<meta name="Author" content="webmaster@aspheute.com">

<META NAME="revisit-after" CONTENT="7 days">
<META NAME="copyright" CONTENT="(c) 2000-2006. Alle Rechte vorbehalten. Der Inhalt dieser Seiten ist urheberrechtlich geschützt.">
<META HTTP-EQUIV="expires" CONTENT="1999-03-30T00:00:00+00:00"> 
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-store">

<meta http-equiv="Description" name="Description" content="Des &ouml;fteren k&ouml;nnen die Eigenheiten eines Browsers dem Programmierer mehr als nur Kopfschmerzen bereiten. In diesem Fall ist es wichtig, genau herausfinden zu k&ouml;nnen, was der Browser dem Server schickt.">
<meta http-equiv="Keywords" name="Keywords" content="ASP,Active Server Pages,IIS,Internet Information Server,PWS,Personal Web Server,ADO,proxyTrace,proxy server,proxy,tracing,set-cookie,Header,Content,Browser,Webserver,Server">
<link rel="stylesheet" href="../includes/default.css">
</HEAD>
<BODY BGCOLOR="#ffffff"  BACKGROUND="../images/layout/aspheutemainbg.gif" >


<div style="border-bottom: solid 5px white;">
<div class="DotNetGermanCommunityBar">
    <a href="http://www.glengamoi.com">Glengamoi (Forum)</a> &middot;
    <a href="http://www.aspheute.com/" style="font-weight: bold">AspHeute</a> &middot;
    <a href="http://dotnetheute.com/">.NET Heute (RSS-Suche)</a> &middot;
    <a href="http://aspxfiles.com/">AspxFiles (Wiki)</a> &middot;
    <a href="http://blogs.dotnetgerman.com/">.NET Blogs</a>
</div>
</div>


<MAP NAME="titlebar">
<!--<AREA SHAPE=RECT COORDS="116,46,191,61" HREF="http://www.aspaktuell.com" ALT="ASP Aktuell">-->
<!--<AREA SHAPE=RECT COORDS="192,46,255,61" HREF="http://www.aspwelt.com" ALT="ASP Welt">-->
<AREA SHAPE=RECT COORDS="256,46,432,61" HREF="http://www.aspgerman.com/aspgerman/" ALT="ASP German">
<AREA SHAPE=RECT COORDS="115,15,269,42" HREF="../default.htm" ALT="Homepage">
<AREA SHAPE=RECT COORDS="278,26,587,42" HREF="../default.htm" ALT="Homepage">
</MAP>

<div style="position:absolute;left:0px;top:30px">
<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td background="../images/layout/aspheutetitle.gif">
<img src="../images/layout/blind.gif" width="715" height="73" usemap="#titlebar" border="0">
</td>
<td width="100%" background="../images/layout/aspheutetitleext.gif">
&nbsp;
</td>
<td background="../images/layout/aspheutetitleend.gif">
<img src="../images/layout/blind.gif" width="25" height="1">
</td>
</tr>
</table>
</div>

<div style="position:absolute;left:1px;top:115px">
<table width="110" border="0" cellspacing="0" cellpadding="0">
<tr><td width="110"><img src="../Images/spacer.gif" width="110" height="1" alt="" border="0"></td></tr>
<tr>
<td background="../images/layout/aspheuteheader.gif" class="header" height=16 width="110">
<p>Liste</p>
</td>
</tr>
<tr>
<td background="../images/layout/aspheuteheaderext.gif" class="header" width="110">

<p class="content">
<a href="../kategorien/dotNET%202dot0.htm">.NET 2.0 (1)</a><br>
<a href="../kategorien/dotNET%20Allgemein.htm">.NET Allgemein (16)</a><br>
<a href="../kategorien/dotNET%20Fu.htm">.NET Fu (5)</a><br>
<a href="../kategorien/ADOdotNET.htm">ADO.NET (11)</a><br>
<a href="../kategorien/Aprilscherz.htm">Aprilscherz (3)</a><br>
<a href="../kategorien/ASP%20Grundlagen.htm">ASP Grundlagen (44)</a><br>
<a href="../kategorien/ASP%20Tricks.htm">ASP Tricks (83)</a><br>
<a href="../kategorien/ASPdotNET.htm">ASP.NET (44)</a><br>
<a href="../kategorien/ASPIntranetdotde.htm">ASPIntranet.de (5)</a><br>
<a href="../kategorien/Csharp.htm">C# (28)</a><br>
<a href="../kategorien/Datenbank.htm">Datenbank (44)</a><br>
<a href="../kategorien/Dokumentation.htm">Dokumentation (4)</a><br>
<a href="../kategorien/IIS%206dot0.htm">IIS 6.0 (1)</a><br>
<a href="../kategorien/Komponenten.htm">Komponenten (29)</a><br>
<a href="../kategorien/Optimierung.htm">Optimierung (10)</a><br>
<a href="../kategorien/Server.htm">Server (21)</a><br>
<a href="../kategorien/Sicherheit.htm">Sicherheit (34)</a><br>
<a href="../kategorien/Tee%20Off.htm">Tee Off (6)</a><br>
<a href="../kategorien/VBdotNET.htm">VB.NET (6)</a><br>
<a href="../kategorien/WAP.htm">WAP (8)</a><br>
<a href="../kategorien/Web%20Services.htm">Web Services (11)</a><br>
<a href="../kategorien/XML.htm">XML (9)</a><br>


<br>
<a href="/syndication/rss.xml"><img src="../Images/rss_small.png" width="25" height="10" alt="RSS 2.0 - Die neuesten f&uuml;nf Artikel auf AspHeute.com" border="0"></a>

</p><!-- </p> remains -->


<br>

</td>
</tr>
<tr>
<td class="empty" width="110">
&nbsp;
</td>
</tr>
<tr>
<td background="../images/layout/aspheutesearch.gif" class="header" height=16 width="110">
<p>Suchen</p>
</td>
</tr>
<tr>
<td background="../images/layout/aspheutesearchext.gif" class="header" width="110">
<form class="content" ACTION="REMOVED" METHOD="GET">
<div>
<input class="Newsletter" type="text" size="10" name="CiRestriction">
<span class="spacer2"><br></span>
<span class="spacer4"><br></span>
<INPUT TYPE="HIDDEN" NAME="CiMaxRecordsPerPage" VALUE="10">
<INPUT TYPE="HIDDEN" NAME="CiSort" VALUE="rank[d]">
<INPUT TYPE="HIDDEN" NAME="HTMLQueryForm" VALUE="../default.htm">
<img src="../images/layout/blind.gif" width="41" height="1"><input type="image" src="../images/layout/aspheutesearchenter.gif" border="0" width="49" height="14"><br>
<span class="spacer4"><br></span>
</div>
</form>
</td>
</tr>
<tr>
<td class="empty" width="110">
&nbsp;
</td>
</tr>
<tr>
<td background="../images/layout/aspheuteheaderext.gif" class="header" width="110">
<p class="content">
<a href="/REMOVED/" title="Our most popular articles translated into English">English Articles</a><br>
<a href="/REMOVED/" title="Visit our Chinese content section">Chinese Articles</a><br>
<a href="../autoren/UnsereAutoren.htm" title="Unsere Autoren">Unsere Autoren</a><br>
&nbsp;<br>
<a href="/REMOVED/link2us.asp" title="Setzen Sie einen Link zu AspHeute!">Link zu AspHeute</a><br>
<a href="/REMOVED/impressum.asp" title="Das Impressum von AspHeute">Impressum</a><br>
<a href="/REMOVED/advertise.asp" title="Werben auch Sie auf AspHeute">Werben</a><br>
<a href="/REMOVED/kontakt.asp" title="Teilen Sie uns Ihre W&uuml;nsche, Beschwerden und Anregungen mit">Anfragen</a><br>
</p>
</td>
</tr>
</table>
</div>



<!-- Content starts here  -->
<div style="position:absolute;left:120px;top:108px">
<table cellspacing="0" cellpadding="0"><!--Tabelle aussen-->
<tr><!--Tabelle aussen, 1/2-->
<td><!--Tabelle aussen, 1/1-->
    <table border=0 align=center><tr><td align=center>


</td></tr></table>

<H1>Mitlauschen bei der Browser-Webserver Kommunikation</H1>
<p>
Geschrieben von: <a href="../autoren/christophwille.htm">Christoph Wille</a><br>
Kategorie: <a href="../kategorien/Server.htm">Server</a><br>
<SCRIPT src="/service/artikelbewertung.asp?Artikel=20020305"></SCRIPT>
</p>
<p>
Des &ouml;fteren k&ouml;nnen die Eigenheiten eines Browsers dem Programmierer mehr als nur Kopfschmerzen
bereiten, vor allem dann, wenn es um das Debuggen von Cookies, speziellen Headern und Daten&uuml;bertragungsformaten
geht. In diesem Fall ist es wichtig, genau herausfinden zu k&ouml;nnen, was der Browser dem Server
schickt, und was vom Server an den Browser retourkommt.
</p>
<p>
Die besonders elegante L&ouml;sung zu diesem Problem ist ein Proxy, also ein Programm, das die Anfrage
des Browsers erh&auml;lt, und diese an den Server weiterleitet. Die Antwort kommt an den Proxy retour,
und dieser leitet sie an den Browser weiter. Der Proxy sieht also den gesamten Datenverkehr zwischen
Client und Server.
</p>
<p>
Normalerweise besitzt jede Firma einen Proxyserver f&uuml;r Internetzugriffe, jedoch ist es sehr unwahrscheinlich,
da&szlig; man f&uuml;r seine Testzwecke mal schnell am Firmenproxy herumexperimentieren darf. Man sollte gar keinen
Gedanken an ein solches Ansinnen verschwenden, vor allem weil es ein spezialisiertes Tool genau f&uuml;r 
unseren Zweck gibt: <a href="http://www.pocketsoap.com/tcptrace/pt.asp" target="_blank">proxyTrace</a>.
Neben seiner Kleinheit hat es einen weiteren Vorteil - es ist gratis.
</p>

<h2>Inbetriebnahme</h2>
<p>
Von einer Installation kann man bei proxyTrace nicht wirklich reden, da es nur aus einer einzigen Datei besteht.
Diese wird durch Doppelklick gestartet, und man bekommt die einzige wirkliche Einstellung pr&auml;sentiert:
</p>

<IMG SRC="Bilder/200203/20020305_1.png" width="443" height="132" alt="" border="0">

<p>
Das ist der Port, an dem sich proxyTrace als Proxy Server am lokalen Computer installiert. Diesen Port
mu&szlig; man dann auch im Internet Explorer, Tools/Internet Options, Connections Tab, LAN Settings Dialogbox
eintragen:
</p>

<IMG SRC="Bilder/200203/20020305_2.png" width="384" height="332" alt="" border="0">

<p>
<b>Achtung:</b> wer einen Firmenproxy hat, bei dem wird wahrscheinlich Bypass proxy server for local
addresses eingestellt sein. Unbedingt ausschalten! Sonst "hintergeht" der Internet Explorer n&auml;mlich proxyTrace
bei Tests die gegen hausinterne Server laufen. Und das wird wohl der Hauptanwendungsfall sein.
</p>

<h2>Verwendung</h2>
<p>
Die Verwendung von proxyTrace ist denkbar simpel. Im Prinzip mu&szlig; man nur eine beliebige URL ansurfen,
ich habe folgendes Beispiel gew&auml;hlt:
</p>

<pre style="background='silver';">
http://sleeper/AspHeute/SortedList/iterateforeach.aspx
</pre>

<p>
Diese Aktion wird automatisch in proxyTrace mitgeloggt:
</p>

<IMG SRC="Bilder/200203/20020305_3.png" width="675" height="375" alt="" border="0">

<p>
Neben der Statistikpane links (mit Bytes In und Bytes Out) sind die beiden rechten Panels die wirklich
interessanten: hier erh&auml;lt man oben die volle Anfrage des Clients an den Server, und unten die volle Antwort des Servers,
beide jeweils mit vollen Headerinformationen (man k&ouml;nnte auch von Rohdaten sprechen).
</p>

<p>
Beginnen wir bei der Anfrage des Clients:
</p>

<pre style="background='silver';">
GET http://sleeper/AspHeute/SortedList/iterateforeach.aspx HTTP/1.0
Accept: */*
Referer: http://sleeper/AspHeute/SortedList/
Accept-Language: en-us
Proxy-Connection: Keep-Alive
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0; Q312461; .NET CLR 1.0.3705)
Host: sleeper
Pragma: no-cache
</pre>

<p>
Da der Browser neu ge&ouml;ffnet war, und ich keine andere Seite auf diesem Server vorher angesurft hatte,
wird kein Cookie an den Server geschickt. Daf&uuml;r aber erf&auml;hrt der Server von uns, welchen Browser wir
verwenden, welche Sprachen von uns akzeptiert werden, und auch woher wir kommen (<i>Referer</i>, siehe
dazu auch der Artikel <a href="20020304.htm">Unerw&uuml;nschte Referer sperren</a>). Und nat&uuml;rlich
ist die erste Information wie die Seite angefragt wird: GET oder POST (<a href="20010205.htm">GET oder POST, das ist hier die Frage</a>).
</p>
<p>
Die Antwort des Servers ist zweigeteilt - und zwar durch eine Leerzeile. Der erste Teil sind die Header
der Antwort, nach der Leerzeile folgt der eigentliche Content:
</p>

<pre style="background='silver';">
HTTP/1.1 200 OK
Server: Microsoft-IIS/5.0
Date: Mon, 04 Mar 2002 20:47:58 GMT
Cache-Control: private
Content-Type: text/html; charset=utf-8
Content-Length: 122

ASP.NET - aspDEdotnet@aspfriends.com&lt;br&gt;
C# - dotnetDEcsharp@aspfriends.com&lt;br&gt;
VB.NET - dotnetDEvb@aspfriends.com&lt;br&gt;
</pre>

<p>
Hier zum Beispiel tauchen dann die richtig interessanten Header zum Thema Content Caching auf
(siehe auch Artikel <a href="19990808.htm">Caching bei Browser und Proxy - Woher Seiten wirklich kommen</a>), 
die <i>Set-Cookie</i> Header und alles was man an Content Type
gesetzt hat. Man sieht das, was der Server abgeschickt hat - und kann somit sofort entscheiden, wo der
Fehler liegt: an einer Fehlinterpretation des Clients, oder ob die Informationen nicht korrekt abgeschickt
wurden.
</p>

<h2>Schlu&szlig;bemerkung</h2>
<p>
Wenn man alle Header des Requests als auch des Response in Rohform betrachten kann, fallen einem offensichtliche
Fehler viel schneller ins Auge als wenn man sich anders an das Problem herantastet. Die Header sind sozusagen
der Schl&uuml;ssel zur L&ouml;sung bei Problemen in der Browser-Server Kommunikation.
</p>
<h2>Download des Codes</h2>
<p><a href="../Code/20020305.zip">Klicken Sie hier</a>, um den Download zu starten.</p>
<h2>Verwandte Artikel</h2>
<p>
<a href="19990808.htm">Caching bei Browser und Proxy - Woher Seiten wirklich kommen</a><br>
<a href="20010205.htm">GET oder POST, das ist hier die Frage</a><br>
<a href="20020503.htm">Show me the source - Includes aufgel&ouml;st</a><br>
<a href="20020731.htm">Trafficreduzierung mit XCompress</a><br>
<a href="20020304.htm">Unerw&uuml;nschte Referer sperren</a><br>

</p>
<h2>Links zu anderen Sites</h2>
<p>
<a target="_blank" href="/REMOVED/3w_link.asp?3wsite=http%3A%2F%2Fwww%2Epocketsoap%2Ecom%2Ftcptrace%2Fpt%2Easp">proxyTrace Download</a><br>

</p>

<h2>Wenn Sie jetzt Fragen haben...</h2>
<p>
Wenn Sie Fragen rund um die in diesem Artikel vorgestellte Technologie haben, dann schauen Sie einfach bei uns
in den <a href="http://glengamoi.com/forums/">Community Foren der deutschen .NET Community</a> vorbei. Die Teilnehmer 
helfen Ihnen gerne, wenn Sie sich zur im Artikel vorgestellten Technologie weiterbilden m&ouml;chten.
</p>

<p>
<a href="http://glengamoi.com/forums/"><img src="../images/glengamoi.com_250.gif" width="250" height="80" alt="" border="0"></a>
</p>


<p>
Haben Sie Fragen die sich direkt auf den Inhalt des Artikels beziehen, dann schreiben Sie dem Autor! Unsere Autoren
freuen sich &uuml;ber Feedback zu ihren Artikeln. Ein einfacher Klick auf die <i>Autor kontaktieren</i>
Schaltfl&auml;che (weiter unten) und schon haben Sie ein f&uuml;r diesen Artikel personalisiertes Anfrageformular.
</p>

<p>&nbsp;</p>
<p>
Und zu guter Letzt m&ouml;chten wir Sie bitten, den Artikel zu bewerten. Damit helfen Sie uns, 
die Qualit&auml;t der Artikel zu verbessern - und anderen Lesern bei der Auswahl der Artikel,
die sie lesen sollten.
</p>

<FORM METHOD="POST" STYLE="margin-bottom: 0px;" NAME="formRating" ACTION="/service/bewerten.asp">
<INPUT TYPE="HIDDEN" NAME="ArticleId" VALUE="20020305" />
<CENTER>
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0">
<TR>
	<TD ALIGN="CENTER" VALIGN="MIDDLE" COLSPAN="7">Bewerten Sie diesen Artikel</TD>
</TR>
<TR>
	<TD><EM>&nbsp;Sehr gut&nbsp;</EM></TD>
	<TD><INPUT TYPE="radio" value="1" NAME="radioRating" /></TD>
	<TD><INPUT TYPE="radio" value="2" NAME="radioRating" /></TD>
	<TD><INPUT TYPE="radio" value="3" NAME="radioRating" /></TD>
	<TD><INPUT TYPE="radio" value="4" NAME="radioRating" /></TD>
	<TD><INPUT TYPE="radio" value="5" NAME="radioRating" /></TD>
	<TD ALIGN="right"><EM>&nbsp;Nicht gen&uuml;gend</EM></TD>
	<TD ROWSPAN="2" VALIGN="middle">&nbsp;<INPUT TYPE="submit" VALUE="Werten!" /></TD>
</TR>
<TR>
	<TD>&nbsp;</TD>
	<TD ALIGN="CENTER">&nbsp;1</TD>
	<TD ALIGN="CENTER">&nbsp;2</TD>
	<TD ALIGN="CENTER">&nbsp;3</TD>
	<TD ALIGN="CENTER">&nbsp;4</TD>
	<TD ALIGN="CENTER">&nbsp;5</TD>
	<TD>&nbsp;</TD>
</TR>
</TABLE>
</FORM>
</center>
&nbsp;<P>
<center>
<p><table><tr><td valign=top>
<form action="REMOVED" method="GET"><input type="hidden" name="pagetitle" value="Mitlauschen bei der Browser-Webserver Kommunikation"><input type="hidden" name="pageurl" value="http://www.aspheute.com/artikel/20020305.htm"><input type="image" src="../images/layout/senden.png" width="107" height="20" border="0" alt="Schicken Sie diese Seite einem Freund!" style="cursor='hand';"></form>
<td>&nbsp;&nbsp;</td>
<td valign=top>
<form action="REMOVED" method="GET"><input type="hidden" name="Author" value="Christoph Wille"><input type="hidden" name="AuthorEmail" value="christophw@alphasierrapapa.com"><input type="hidden" name="Artikel" value="20020305"><input type="image" src="../images/layout/kontakt.png" width="107" height="20" border="0" alt="Kontaktieren Sie den Autor!" style="cursor='hand';"></form>
<td>&nbsp;&nbsp;</td>
<td valign=top><a href="../PrinterFriendly/20020305.htm"><img src="../images/layout/druck.png" width="118" height="20" border="0" alt="F&uuml;r Ausdruck optimierte Seite"></a></td>
</tr></table></p>
</center>

<center>
<p class="content">
&copy;2000-2006 <A HREF="../service/copyright.htm" title="Copyright Informationen">AspHeute.com</A><br>
Alle Rechte vorbehalten. Der Inhalt dieser Seiten ist urheberrechtlich gesch&uuml;tzt.<br>
Eine &Uuml;bernahme von Texten (auch nur auszugsweise) oder Graphiken bedarf unserer schriftlichen Zustimmung.
<hr>
</p>
</center>

</td>
</tr><!--Tabelle aussen, 2/2-->
</table><!--Tabelle aussen-->
</div>

</BODY>
</HTML>
