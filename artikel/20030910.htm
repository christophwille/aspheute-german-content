<HTML>
<HEAD>
<TITLE>Plagiat oder nicht?</TITLE>
<META HTTP-EQUIV="content-type: text/html; charset= ISO-8859-1">
<META HTTP-EQUIV="Content-Language" CONTENT="DE">
<META NAME="robots" CONTENT="FOLLOW,INDEX">
<META NAME="generator" CONTENT="Xitra Site Publishing">
<meta name="Author" content="webmaster@aspheute.com">

<META NAME="revisit-after" CONTENT="7 days">
<META NAME="copyright" CONTENT="(c) 2000-2006. Alle Rechte vorbehalten. Der Inhalt dieser Seiten ist urheberrechtlich geschützt.">
<META HTTP-EQUIV="expires" CONTENT="1999-03-30T00:00:00+00:00"> 
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-store">

<meta http-equiv="Description" name="Description" content="Ob das Aussehen einer Website, die Funktionalit&auml;t eines Programmes, &uuml;berall steht Sourcecode dahinter - von HTML bis C#. Wie weist man nach da&szlig; geklaut wurde?">
<meta http-equiv="Keywords" name="Keywords" content="ASP,Active Server Pages,IIS,Internet Information Server,PWS,Personal Web Server,ADO,LCS,longest common substring,Plagiat,Plagiarmus,Erkennung,Wahrscheinlichkeit,entdecken,nachweisen,Analyse">
<link rel="stylesheet" href="../includes/default.css">
</HEAD>
<BODY BGCOLOR="#ffffff"  BACKGROUND="../images/layout/aspheutemainbg.gif" >


<div style="border-bottom: solid 5px white;">
<div class="DotNetGermanCommunityBar">
    <a href="http://www.glengamoi.com">Glengamoi (Forum)</a> &middot;
    <a href="http://www.aspheute.com/" style="font-weight: bold">AspHeute</a> &middot;
    <a href="http://dotnetheute.com/">.NET Heute (RSS-Suche)</a> &middot;
    <a href="http://aspxfiles.com/">AspxFiles (Wiki)</a> &middot;
    <a href="http://blogs.dotnetgerman.com/">.NET Blogs</a>
</div>
</div>


<MAP NAME="titlebar">
<!--<AREA SHAPE=RECT COORDS="116,46,191,61" HREF="http://www.aspaktuell.com" ALT="ASP Aktuell">-->
<!--<AREA SHAPE=RECT COORDS="192,46,255,61" HREF="http://www.aspwelt.com" ALT="ASP Welt">-->
<AREA SHAPE=RECT COORDS="256,46,432,61" HREF="http://www.aspgerman.com/aspgerman/" ALT="ASP German">
<AREA SHAPE=RECT COORDS="115,15,269,42" HREF="../default.htm" ALT="Homepage">
<AREA SHAPE=RECT COORDS="278,26,587,42" HREF="../default.htm" ALT="Homepage">
</MAP>

<div style="position:absolute;left:0px;top:30px">
<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td background="../images/layout/aspheutetitle.gif">
<img src="../images/layout/blind.gif" width="715" height="73" usemap="#titlebar" border="0">
</td>
<td width="100%" background="../images/layout/aspheutetitleext.gif">
&nbsp;
</td>
<td background="../images/layout/aspheutetitleend.gif">
<img src="../images/layout/blind.gif" width="25" height="1">
</td>
</tr>
</table>
</div>

<div style="position:absolute;left:1px;top:115px">
<table width="110" border="0" cellspacing="0" cellpadding="0">
<tr><td width="110"><img src="../Images/spacer.gif" width="110" height="1" alt="" border="0"></td></tr>
<tr>
<td background="../images/layout/aspheuteheader.gif" class="header" height=16 width="110">
<p>Liste</p>
</td>
</tr>
<tr>
<td background="../images/layout/aspheuteheaderext.gif" class="header" width="110">

<p class="content">
<a href="../kategorien/dotNET%202dot0.htm">.NET 2.0 (1)</a><br>
<a href="../kategorien/dotNET%20Allgemein.htm">.NET Allgemein (16)</a><br>
<a href="../kategorien/dotNET%20Fu.htm">.NET Fu (5)</a><br>
<a href="../kategorien/ADOdotNET.htm">ADO.NET (11)</a><br>
<a href="../kategorien/Aprilscherz.htm">Aprilscherz (3)</a><br>
<a href="../kategorien/ASP%20Grundlagen.htm">ASP Grundlagen (44)</a><br>
<a href="../kategorien/ASP%20Tricks.htm">ASP Tricks (83)</a><br>
<a href="../kategorien/ASPdotNET.htm">ASP.NET (44)</a><br>
<a href="../kategorien/ASPIntranetdotde.htm">ASPIntranet.de (5)</a><br>
<a href="../kategorien/Csharp.htm">C# (28)</a><br>
<a href="../kategorien/Datenbank.htm">Datenbank (44)</a><br>
<a href="../kategorien/Dokumentation.htm">Dokumentation (4)</a><br>
<a href="../kategorien/IIS%206dot0.htm">IIS 6.0 (1)</a><br>
<a href="../kategorien/Komponenten.htm">Komponenten (29)</a><br>
<a href="../kategorien/Optimierung.htm">Optimierung (10)</a><br>
<a href="../kategorien/Server.htm">Server (21)</a><br>
<a href="../kategorien/Sicherheit.htm">Sicherheit (34)</a><br>
<a href="../kategorien/Tee%20Off.htm">Tee Off (6)</a><br>
<a href="../kategorien/VBdotNET.htm">VB.NET (6)</a><br>
<a href="../kategorien/WAP.htm">WAP (8)</a><br>
<a href="../kategorien/Web%20Services.htm">Web Services (11)</a><br>
<a href="../kategorien/XML.htm">XML (9)</a><br>


<br>
<a href="/syndication/rss.xml"><img src="../Images/rss_small.png" width="25" height="10" alt="RSS 2.0 - Die neuesten f&uuml;nf Artikel auf AspHeute.com" border="0"></a>

</p><!-- </p> remains -->


<br>

</td>
</tr>
<tr>
<td class="empty" width="110">
&nbsp;
</td>
</tr>
<tr>
<td background="../images/layout/aspheutesearch.gif" class="header" height=16 width="110">
<p>Suchen</p>
</td>
</tr>
<tr>
<td background="../images/layout/aspheutesearchext.gif" class="header" width="110">
<form class="content" ACTION="REMOVED" METHOD="GET">
<div>
<input class="Newsletter" type="text" size="10" name="CiRestriction">
<span class="spacer2"><br></span>
<span class="spacer4"><br></span>
<INPUT TYPE="HIDDEN" NAME="CiMaxRecordsPerPage" VALUE="10">
<INPUT TYPE="HIDDEN" NAME="CiSort" VALUE="rank[d]">
<INPUT TYPE="HIDDEN" NAME="HTMLQueryForm" VALUE="../default.htm">
<img src="../images/layout/blind.gif" width="41" height="1"><input type="image" src="../images/layout/aspheutesearchenter.gif" border="0" width="49" height="14"><br>
<span class="spacer4"><br></span>
</div>
</form>
</td>
</tr>
<tr>
<td class="empty" width="110">
&nbsp;
</td>
</tr>
<tr>
<td background="../images/layout/aspheuteheaderext.gif" class="header" width="110">
<p class="content">
<a href="/REMOVED/" title="Our most popular articles translated into English">English Articles</a><br>
<a href="/REMOVED/" title="Visit our Chinese content section">Chinese Articles</a><br>
<a href="../autoren/UnsereAutoren.htm" title="Unsere Autoren">Unsere Autoren</a><br>
&nbsp;<br>
<a href="/REMOVED/link2us.asp" title="Setzen Sie einen Link zu AspHeute!">Link zu AspHeute</a><br>
<a href="/REMOVED/impressum.asp" title="Das Impressum von AspHeute">Impressum</a><br>
<a href="/REMOVED/advertise.asp" title="Werben auch Sie auf AspHeute">Werben</a><br>
<a href="/REMOVED/kontakt.asp" title="Teilen Sie uns Ihre W&uuml;nsche, Beschwerden und Anregungen mit">Anfragen</a><br>
</p>
</td>
</tr>
</table>
</div>



<!-- Content starts here  -->
<div style="position:absolute;left:120px;top:108px">
<table cellspacing="0" cellpadding="0"><!--Tabelle aussen-->
<tr><!--Tabelle aussen, 1/2-->
<td><!--Tabelle aussen, 1/1-->
    <table border=0 align=center><tr><td align=center>


</td></tr></table>

<H1>Plagiat oder nicht?</H1>
<p>
Geschrieben von: <a href="../autoren/christophwille.htm">Christoph Wille</a><br>
Kategorie: <a href="../kategorien/Csharp.htm">C#</a><br>
<SCRIPT src="/service/artikelbewertung.asp?Artikel=20030910"></SCRIPT>
</p>
<p>
Ob das Aussehen einer Website, die Funktionalit&auml;t eines Programmes, &uuml;berall steht Sourcecode dahinter - von HTML bis C#.
Stellen Sie sich vor, es kommt Ihnen zuf&auml;llig ein Sourcecode unter, der Sie ganz stark an Ihren eigenen aus einem Projekt
erinnert... so ist es uns, dem 
<a href="http://www.icsharpcode.net/opensource/sd/" target="_blank">SharpDevelop</a> Team, passiert. Die Frage die sich nun stellt, wie weist man nach da&szlig; geklaut
wurde?
</p>
<p>
Ein Weg ist, m&uuml;hsam jedes Sourcecodefile h&auml;ndisch zu vergleichen, das verbietet sich allerdings ab einer gewissen Zahl an 
Sourcecodezeilen - die Stellen des Plagiarismus wollen eingegrenzt werden, bevor man sich die M&uuml;he des h&auml;ndischen Vergleichens
macht. Ein sehr robuster Weg um Plagiarismus aufzudecken ist die Verwendung des
<a href="http://www.cs.sunysb.edu/~algorith/files/longest-common-substring.shtml" target="_blank">Longest Common Substring</a>
Algorithmus, der f&uuml;r die Erkennung von Gleichheiten in DNA Sequenzen verwendet wird. Dieser Algorithmus ist nicht ganz ohne
Seitenhieb auf unser Problem: wir lernen, was im Laufe der Evolution an Genen erhalten geblieben ist.
</p>

<h2>Das LCS Tool</h2>
<p>
Im Download f&uuml;r diesen Artikel mit dabei ist das LCS Tool als Kommandozeilenversion. Als Wort der Warnung: die Pfade f&uuml;r die
zu vergleichenden Dateien sind hardcodiert, aber da der Sourcecode mitgeliefert wird, ist die Anpassung eine Kleinigkeit. 
</p>
<p>
Die gesamte LCS Funktionalit&auml;t ist in einer passend <i>LCS</i> genannten Klasse verpackt:
</p>

<pre style="background='silver';">
namespace Algorithms
{
  public class LCS
  {
    private string ReadFile(string fileName);
    private int Compute(ref string src, ref string dst, int srcOffset, int dstOffset);
    public void Compare(string srcFile, string dstFile);
    public void CompareSet(string[] src, string[] dst);
  }
}
</pre>

<p>
Bevor wir uns Sourcecode f&uuml;r die Klasse selbst ansehen, wie verwendet man die Klasse? Hier ein Beispiel:
</p>

<pre style="background='silver';">
string[] sourceFiles = new string[] { @"AssemblyInfo1.cs" };
string[] destinationFiles = new string[] { @"AssemblyInfo2.cs" };

LCS lcs = new LCS();
lcs.CompareSet(sourceFiles, destinationFiles);
</pre>

<p>
Die Methode <i>CompareSet</i> kann mehrere Dateien vergleichen, die per Array &uuml;bergeben werden. Intern ruft sie die Methode
<i>Compare</i> f&uuml;r jedes Set von Dateien (Source und potentielles Plagiat) auf - diese liest dann die Dateien aus 
(<i>ReadFile</i> l&ouml;scht zus&auml;tzlich die Whitespaces) und errechnet den LCS Wert (<i>Compute</i>): den l&auml;ngsten gefundenen 
Substring, und daraus die Wahrscheinlichkeit, da&szlig; es sich tats&auml;chlich um ein Plagiat handelt:
</p>

<pre style="background='silver';">
    public void Compare(string srcFile, string dstFile)
    {
      string src = ReadFile(srcFile);
      string dst = ReadFile(dstFile);
    
      table = new int[src.Length, dst.Length];
      for (int i =0; i &lt; src.Length; ++i) 
      {
        for (int j =0; j &lt; dst.Length; ++j) 
        {
          table[i, j] = -1;
        }
      }
      Console.WriteLine("source: {0}, destination: {1}", Path.GetFileName(srcFile), Path.GetFileName(dstFile));
      Console.WriteLine("source length: {0}, destination length: {1}", src.Length, dst.Length);
      int lcs = Compute(ref src, ref dst, 0, 0);
      Console.WriteLine("LCS match: {0}/{1}%", lcs, (lcs * 100) / dst.Length);
    }
</pre>

<p>
In unserem Drill-Down in die Berechnung des LCS fehlt uns jetzt nur noch die <i>Compute</i> Methode:
</p>

<pre style="background='silver';">
    private int Compute(ref string src, ref string dst, int srcOffset, int dstOffset)
    {
      if (srcOffset >= src.Length || dstOffset >= dst.Length) 
      {
        return 0;
      }
    
      if (table[srcOffset, dstOffset] == -1) 
      {
        if (Char.ToUpper(src[srcOffset]) == Char.ToUpper(dst[dstOffset])) 
        {
          table[srcOffset, dstOffset] = 1 + Compute(ref src, ref dst, srcOffset + 1, dstOffset + 1);
        } 
        else 
        {
          table[srcOffset, dstOffset] =  Math.Max(Compute(ref src, ref dst, srcOffset, dstOffset + 1), 
            Compute(ref src, ref dst, srcOffset + 1, dstOffset));
        }
      }
    
      return table[srcOffset, dstOffset];
    }
</pre>

<p>
Es wird die private Variable <i>table</i> verwendet, die zuvor in der <i>Compare</i> Methode mit -1en gef&uuml;llt wurde. Was wird
hier berechnet? Der l&auml;ngste zusammenh&auml;ngende Substring. Und das passiert indem man die beiden Dateien (mittlerweile sind es Strings)
Zeichen f&uuml;r Zeichen durchgeht, und mit &Uuml;berspringen von Abweichungen den l&auml;ngsten gemeinsamen String herausrechnet (mathematische
Details in <a href="http://www.cs.sunysb.edu/~algorith/files/longest-common-substring.shtml" target="_blank">Longest Common Substring</a>).
</p>
<p>
Damit hat man dann eine Wahrscheinlichkeit an der Hand, mit der man eine sehr gute Aussage treffen kann, ob ein Sourcecode von einem
anderen "inspiriert" wurde (die ber&uuml;hmte Blaupause).
</p>

<h2>Anwendung</h2>
<p>
Um zu demonstrieren wie das Programm arbeitet, habe ich eine von VS.NET generierte AssemblyInfo.cs Datei genommen, und diese
Datei zweimal kopiert. Eine Datei (AssemblyInfo1.cs) wurde nicht ver&auml;ndert, und in der zweiten (AssemblyInfo2.cs) 
nur das AssemblyCompany Attribut mit einem Wert bef&uuml;llt:
</p>

<pre style="background='silver';">
C:\lcs\bin\Debug>lcs
source: AssemblyInfo1.cs, destination: AssemblyInfo2.cs
source length: 1908, destination length: 1923
LCS match: 1908/99%
</pre>

<p>
Tja, ich w&uuml;rde sagen da hat wer mein AssemblyInfo1.cs genommen und nur einen String eingef&uuml;gt. Plagiat.
</p>
<p>
Als n&auml;chstes habe ich aus AssemblyInfo2.cs alle Kommentare gel&ouml;scht, und das Tool nochmals gestartet:
</p>

<pre style="background='silver';">
C:\lcs\bin\Debug>lcs
source: AssemblyInfo1.cs, destination: AssemblyInfo2.cs
source length: 1908, destination length: 457
LCS match: 442/96%
</pre>

<p>
So ein Pech aber auch, eine einfache Kommentarkosmetik wird immer noch durch das Tool entlarvt.
</p>
<p>
Ich erspare mir jetzt weitere Demonstrationen, Sie sehen ja schon in welche Richtung das l&auml;uft - man hat mit LCS eine sehr
gute M&ouml;glichkeit, Plagiatskandidaten zu erforschen. Aus unserer Erfahrung sollte man sich alles ab 60% Wahrscheinlichkeit 
anschauen, allerdings Vorsicht bei Dateien die kaum mehr als eine Zeile Code pro Methode beinhalten: hier l&auml;uft man Gefahr,
Implementierungen von Interfaces die einfach nicht anders bewerkstelligt werden k&ouml;nnen als Plagiate mi&szlig;zuinterpretieren.
Gleiches gilt f&uuml;r durch Wizards autogenerierte Klassenstubs und dergleichen.
</p>
<p>
Hat man Plagiatskandidaten gefunden, mu&szlig; man den Code aber dennoch durchsehen - und da findet man schon die eine oder
andere Eigenheit des Programmierers, die der Kopierer "miteingeschleppt" hat. Bei uns waren das Bugs spezifisch zum 
Framework das bei uns rund um den geklauten Code verwendet wurde, etliche Eigenheiten des Programmierers und andere
Kleinigkeiten.
</p>

<h2>Schlu&szlig;bemerkung</h2>
<p>
Hat man den Code analysiert kommt dann der eigentlich nervenaufreibende Teil: denjenigen zu kontaktieren, der den Code geklaut hat,
es aber sicher nicht sofort zugeben wird. Hat man aber eine solide Analyse (und LCS mit seinen harten Wahrscheinlichkeiten tut mehr "weh"
als die Fakten die man durch h&auml;ndische Nachanalyse gefunden hat), dann bringt man den 
<a href="http://www.icsharpcode.net/pub/relations/amatterofinspiration.aspx" target="_blank">Inspirierten</a> auch dazu,
den Code zu &auml;ndern.
</p>
<h2>Download des Codes</h2>
<p><a href="../Code/20030910.zip">Klicken Sie hier</a>, um den Download zu starten.</p>
<h2>Links zu anderen Sites</h2>
<p>
<a target="_blank" href="/REMOVED/3w_link.asp?3wsite=http%3A%2F%2Fwww%2Eicsharpcode%2Enet%2Fpub%2Frelations%2Famatterofinspiration%2Easpx">A matter of inspiration</a><br>
<a target="_blank" href="/REMOVED/3w_link.asp?3wsite=http%3A%2F%2Fwww%2Ecs%2Esunysb%2Eedu%2F%7Ealgorith%2Ffiles%2Flongest%2Dcommon%2Dsubstring%2Eshtml">Longest Common Substring Algorithmus</a><br>
<a target="_blank" href="/REMOVED/3w_link.asp?3wsite=http%3A%2F%2Fwww%2Eicsharpcode%2Enet%2Fopensource%2Fsd%2F">SharpDevelop</a><br>

</p>

<h2>Wenn Sie jetzt Fragen haben...</h2>
<p>
Wenn Sie Fragen rund um die in diesem Artikel vorgestellte Technologie haben, dann schauen Sie einfach bei uns
in den <a href="http://glengamoi.com/forums/">Community Foren der deutschen .NET Community</a> vorbei. Die Teilnehmer 
helfen Ihnen gerne, wenn Sie sich zur im Artikel vorgestellten Technologie weiterbilden m&ouml;chten.
</p>

<p>
<a href="http://glengamoi.com/forums/"><img src="../images/glengamoi.com_250.gif" width="250" height="80" alt="" border="0"></a>
</p>


<p>
Eine weitere sehr hilfreiche Resource ist das <a href="http://aspxfiles.com/">deutsche ASP.NET Wiki</a>,
das als zentrale Anlaufstelle f&uuml;r Tips, Tricks, Know How und alles N&uuml;tzliche was man in seinem Alltag als 
(ASP).NET-Entwickler so braucht und entdeckt gedacht ist. 
</p>

<p>
Haben Sie Fragen die sich direkt auf den Inhalt des Artikels beziehen, dann schreiben Sie dem Autor! Unsere Autoren
freuen sich &uuml;ber Feedback zu ihren Artikeln. Ein einfacher Klick auf die <i>Autor kontaktieren</i>
Schaltfl&auml;che (weiter unten) und schon haben Sie ein f&uuml;r diesen Artikel personalisiertes Anfrageformular.
</p>

<p>&nbsp;</p>
<p>
Und zu guter Letzt m&ouml;chten wir Sie bitten, den Artikel zu bewerten. Damit helfen Sie uns, 
die Qualit&auml;t der Artikel zu verbessern - und anderen Lesern bei der Auswahl der Artikel,
die sie lesen sollten.
</p>

<FORM METHOD="POST" STYLE="margin-bottom: 0px;" NAME="formRating" ACTION="/service/bewerten.asp">
<INPUT TYPE="HIDDEN" NAME="ArticleId" VALUE="20030910" />
<CENTER>
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0">
<TR>
	<TD ALIGN="CENTER" VALIGN="MIDDLE" COLSPAN="7">Bewerten Sie diesen Artikel</TD>
</TR>
<TR>
	<TD><EM>&nbsp;Sehr gut&nbsp;</EM></TD>
	<TD><INPUT TYPE="radio" value="1" NAME="radioRating" /></TD>
	<TD><INPUT TYPE="radio" value="2" NAME="radioRating" /></TD>
	<TD><INPUT TYPE="radio" value="3" NAME="radioRating" /></TD>
	<TD><INPUT TYPE="radio" value="4" NAME="radioRating" /></TD>
	<TD><INPUT TYPE="radio" value="5" NAME="radioRating" /></TD>
	<TD ALIGN="right"><EM>&nbsp;Nicht gen&uuml;gend</EM></TD>
	<TD ROWSPAN="2" VALIGN="middle">&nbsp;<INPUT TYPE="submit" VALUE="Werten!" /></TD>
</TR>
<TR>
	<TD>&nbsp;</TD>
	<TD ALIGN="CENTER">&nbsp;1</TD>
	<TD ALIGN="CENTER">&nbsp;2</TD>
	<TD ALIGN="CENTER">&nbsp;3</TD>
	<TD ALIGN="CENTER">&nbsp;4</TD>
	<TD ALIGN="CENTER">&nbsp;5</TD>
	<TD>&nbsp;</TD>
</TR>
</TABLE>
</FORM>
</center>
&nbsp;<P>
<center>
<p><table><tr><td valign=top>
<form action="REMOVED" method="GET"><input type="hidden" name="pagetitle" value="Plagiat oder nicht?"><input type="hidden" name="pageurl" value="http://www.aspheute.com/artikel/20030910.htm"><input type="image" src="../images/layout/senden.png" width="107" height="20" border="0" alt="Schicken Sie diese Seite einem Freund!" style="cursor='hand';"></form>
<td>&nbsp;&nbsp;</td>
<td valign=top>
<form action="REMOVED" method="GET"><input type="hidden" name="Author" value="Christoph Wille"><input type="hidden" name="AuthorEmail" value="christophw@alphasierrapapa.com"><input type="hidden" name="Artikel" value="20030910"><input type="image" src="../images/layout/kontakt.png" width="107" height="20" border="0" alt="Kontaktieren Sie den Autor!" style="cursor='hand';"></form>
<td>&nbsp;&nbsp;</td>
<td valign=top><a href="../PrinterFriendly/20030910.htm"><img src="../images/layout/druck.png" width="118" height="20" border="0" alt="F&uuml;r Ausdruck optimierte Seite"></a></td>
</tr></table></p>
</center>

<center>
<p class="content">
&copy;2000-2006 <A HREF="../service/copyright.htm" title="Copyright Informationen">AspHeute.com</A><br>
Alle Rechte vorbehalten. Der Inhalt dieser Seiten ist urheberrechtlich gesch&uuml;tzt.<br>
Eine &Uuml;bernahme von Texten (auch nur auszugsweise) oder Graphiken bedarf unserer schriftlichen Zustimmung.
<hr>
</p>
</center>

</td>
</tr><!--Tabelle aussen, 2/2-->
</table><!--Tabelle aussen-->
</div>

</BODY>
</HTML>
